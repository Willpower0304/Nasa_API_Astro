---
import Layout from "../layouts/Layout.astro";
import Navbar from '../components/Navbar.astro';

const API_KEY = import.meta.env.NASA_API_KEY || "DEMO_KEY";
const res = await fetch(`https://api.nasa.gov/planetary/apod?api_key=${API_KEY}&count=4`);
const apods = await res.json();
---

<Layout title="Mission">
    <main>
		<div class="top_space">
			<Navbar />
			<div class="hero">
				<h1>Astronomy Picture of the Day</h1>
				<p>Our mission is to provide easy access to NASA's vast collection of data and imagery, enabling users to explore and discover fascinating information about our universe. We aim to create an intuitive and user-friendly interface that allows everyone, from casual enthusiasts to researchers, to search and access NASA's resources effortlessly.</p>
			</div>
		</div>

        <div class="title_section">
			<h1>Featured  Pictures</h1>
			<p>Daily astronomy images from NASA</p>
		</div>

		<div class="main_content">
			{apods && Array.isArray(apods) && apods.map(apod => (
				<div class="apod_card" style={`background-image: url('${apod.url}');`}>
					<div class="apod_overlay"></div>
					<div class="apod_info">
						<span class="apod_date">{apod.date}</span>
						<h2 class="apod_title">{apod.title}</h2>
					</div>
				</div>
			))}
		</div>

		<div class="middle_space">
			<h1>Asteroids NeoWs</h1>
			<p>Near Earth Object Web Service
			Track close approaches of asteroids and comets with real-time data on potentially hazardous objects near our planet.</p>
			<a href="">Learn More</a>
		</div>

    </main>
</Layout>

<style>
    .top_space {
		height: 98vh;
		background-image: url(../assets/bg2.jpg);
		background-size: cover;
		background-position: center;
		display: flex;
		flex-direction: column;
		justify-content: flex-start;
	}

	.hero {
		color: white;
		align-content: center;
		flex: 1 0 auto;
		display: flex;
		flex-direction: column;
		margin: 7rem 4rem;
	}

	.hero h1 {
		font-family: 'Roboto-Bold', sans-serif;
		font-size: 5rem;
		margin: 0;
	}

	.hero p {
		font-size: 1.1rem;
		max-width: 70ch;
		line-height: 1.3;
		color: rgb(255, 255, 255);;
	}

	.title_section {
		display: flex;
		justify-content: space-between;
		margin: 4rem 4rem ;
	}

	.title_section h1 {
		font-family: 'Roboto-Bold', sans-serif;
		font-size: 3rem;
		margin: 0;
	}

	.title_section p {
		font-family: 'Roboto-Bold', sans-serif;
		font-size: 1.3rem;
		
	}

	.main_content {
		display: grid;
		grid-template-columns: 1fr 1fr 1fr;
		grid-template-areas: 
			"left center right1"
    		"left center right2";
		gap: 1rem;
		margin: 0rem 4rem 7rem;
	}

	
	.apod_card:nth-child(1) {
		grid-area: left;
		height: auto;
		min-height: 100%;
	}

	.apod_card:nth-child(2) {
		grid-area: center;
		height: auto;
		min-height: 100%;
	}

	.apod_card:nth-child(3) {
		grid-area: right1;
	}

	.apod_card:nth-child(4) {
		grid-area: right2;
	}

	.apod_card {
		position: relative;
		display: flex;
		flex-direction: column;
		justify-content: flex-end;
		height: 200px;
		overflow: hidden;
		background-size: cover;
		background-position: center;
	}

	.apod_overlay {
		position: absolute;
		inset: 0;
		background: rgba(0,0,0,0.45);
		transition: background 0.3s;
	}

	.apod_card:hover .apod_overlay {
		background: rgba(0,0,0,0.6);
	}

	.apod_info {
		font-family: "Roboto-Bold", sans-serif;
		position: relative;
		z-index: 1;
		padding: 1.2rem;
		display: flex;
		flex-direction: column;
		align-items: flex-start;
	}

	.apod_date {
		font-family: "Roboto", sans-serif;
		font-size: 0.95rem;
		color: #d8d8d8;
		margin-bottom: 0.2rem;
		letter-spacing: 1px;
		opacity: 0.85;
	}

	.apod_title {
		font-size: 1.5rem;
		color: #fff;
		font-weight: bold;
		margin: 0;
		text-shadow: 0 2px 8px rgba(0,0,0,0.7);
	}

	.middle_space {
		background-image: url(../assets/bg3.jpg);
		background-size: cover;
		background-position: center;
		height: 100vh;
		background-size: cover;
		background-position: center;
		display: flex;
		flex-direction: column;
		align-content: center;
		flex: 1 0 auto;
		justify-content: center;
	}

	.middle_space h1 {
		font-family: 'Roboto-Bold', sans-serif;
		color: white;
		font-size: 5.1rem;
		margin: 1rem 3rem;
	}

	.middle_space p {
		font-size: 1.1rem;
		max-width: 70ch;
		line-height: 1.3;
		color: rgb(255, 255, 255);
		margin: 1rem 3rem;
	}

	.middle_space a {
		font-family: 'Roboto-Bold', sans-serif;
		font-size: 1.5rem;
		color: white;
		text-decoration: none;
		margin: 0.7rem 3rem;
		max-width: fit-content;
	}



	@media (max-width: 900px) {
		.main_content {
			grid-template-columns: 1fr 1fr;
		}
	}
	@media (max-width: 600px) {
		.main_content {
			grid-template-columns: 1fr;
		}
		.apod_card {
			height: 220px;
		}
	}
</style>
